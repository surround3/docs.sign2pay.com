(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};s2p.Documentation=function(){function e(e){this.bindPaymentRequestModal=t(this.bindPaymentRequestModal,this),this.bindAccessGrantModal=t(this.bindAccessGrantModal,this),this.bindAuthorizationCodeModal=t(this.bindAuthorizationCodeModal,this),this.renderCode=t(this.renderCode,this),this.renderPanel=t(this.renderPanel,this),this.pollForState=t(this.pollForState,this),this.hijackSMSForm=t(this.hijackSMSForm,this),this.bindSMSDemos=t(this.bindSMSDemos,this),this.hideToDos=t(this.hideToDos,this),this.setNavigationSection=t(this.setNavigationSection,this),this.api_endpoint="https://app.sign2pay.com/",this.sectionClass=e.sectionClass,this.pageClass=e.pageClass,this.sectionClass&&this.setNavigationSection(),"integrations"===this.sectionClass&&"approaches"===this.pageClass&&(this.bindAuthorizationCodeModal(),this.bindAccessGrantModal(),this.bindPaymentRequestModal()),this.bindSMSDemos(),this.hideToDos()}return e.prototype.setNavigationSection=function(){var t;return null!=this.sectionClass?($("li.doc_section .pages").removeClass("in"),t=$("li.doc_section[data-section='"+this.sectionClass+"'] .pages"),t.addClass("in"),null!=this.pageClass?t.find("."+this.pageClass).addClass("active"):$("li.doc_section[data-section='"+this.sectionClass+"']").find("a.overview").addClass("active")):void 0},e.prototype.hideToDos=function(){return $(".todo").hide()},e.prototype.bindSMSDemos=function(){return $("#submit_sms_button").on("click",function(t){return function(e){var n;return n=new window.spinkitButton({el:$(e.currentTarget)}),""!==$("#phone").val()?t.hijackSMSForm():($(".sk-spinner").remove(),$("span.sk-text").show()),!1}}(this)),$("#submit_sms_form").on("submit",function(t){return function(t){return!1}}(this)),$("#display_phone").on("keyup change",function(){var t;t=void 0,t=$("#display_phone").intlTelInput("getNumber"),$("#phone").val(t)}),$("#display_phone").intlTelInput({defaultCountry:"auto",onlyCountries:this.countries,geoIpLookup:function(t){return $.get("https://ipinfo.io?token=b10555a836c3e0",function(){},"jsonp").always(function(e){var n;return n=void 0,n=e&&e.country?e.country:"",t(n)})}})},e.prototype.hijackSMSForm=function(){var t,e;return t=$("#submit_sms_form"),e={url:t.attr("action"),data:t.serialize(),type:"POST"},$.ajax(e).success(function(t){return function(e){return window.sms_id=e.id,null!=window.sms_id?(t.pollForState(),$("#submit_sms_button .sk-text").text(e.state),$(".sk-spinner").remove(),$("span.sk-text").show()):($("#submit_sms_button .sk-text").text("Sorry - SMS Failed"),$(".sk-spinner").remove(),$("span.sk-text").show())}}(this)).error(function(t){return function(){return console.log(error),$("#submit_sms_button .sk-text").text("SMS Failed"),$(".sk-spinner").remove(),$("span.sk-text").show()}}(this))},e.prototype.pollForState=function(){var t;return console.log("check state"),t={type:"GET",url:"https://authature.com/sms/"+window.sms_id},$.ajax(t).done(function(t){return function(e){return console.log(e.state),$("#submit_sms_button .sk-text").text(e.state),"paid"!==e.state?window.setTimeout(t.pollForState,5e3):void 0}}(this))},e.prototype.renderPanel=function(t,e,n){return'<div class="panel panel-'+t+'">'+('<div class="panel-heading"><h3 class="panel-title">'+e+"</h3></div>")+('<div class="panel-body">'+n+"</div>")+"</div>"},e.prototype.renderCode=function(t,e){return"<h4>"+t+":</h4><pre><code>"+e+"</code></pre>"},e.prototype.bindAuthorizationCodeModal=function(){var t,e;return e=function(t){return function(e,n){return e?n?t.renderPanel("danger",e.error,e.error_description):t.renderPanel("success","Authroization Code","Your authorization code is <strong>"+e.code+"</strong>"):t.renderPanel("danger",e.error,e.error_description)}}(this),t=function(t){return function(n,r,s){var o;return o=e(r,s)+t.renderCode("Request URL",n)+t.renderCode("Response JSON",JSON.stringify(r,void 0,2)),$("#authorization_code_output").html(o),$("#authroization_code_modal .nav-tabs a[href=#authorization_code_output]").tab("show")}}(this),$("#authroization_code_modal #send_request_button").on("click",function(e){return function(n){var r;return r={url:e.api_endpoint+"oauth/no-authorize?"+$("#authroization_code_modal form").serialize(),dataType:"json",type:"POST"},$.ajax(r).success(function(e){return t(this.url,e,!1)}).error(function(e,n,r){return e.responseJSON?t(this.url,e.responseJSON,!0):t(this.url,{error:n,error_description:r},!0)}),!0}}(this))},e.prototype.bindAccessGrantModal=function(){var t,e;return e=function(t){return function(e,n){return e?n?t.renderPanel("danger",e.error,e.error_description):t.renderPanel("success","Access Token","Your access token is <strong>"+e.access_token.token+"</strong>"):t.renderPanel("danger",e.error,e.error_description)}}(this),t=function(t){return function(n,r,s,o){var i;return i=e(s,o)+t.renderCode("Request URL",n)+t.renderCode("Request Headers",JSON.stringify(r,void 0,2))+t.renderCode("Response JSON",JSON.stringify(s,void 0,2)),$("#access_grant_output").html(i),$("#access_grant_modal .nav-tabs a[href=#access_grant_output]").tab("show")}}(this),$("#access_grant_modal #send_request_button").on("click",function(e){return function(n){var r,s,o,i;return o=$("#access_grant_modal form"),r=$("#access_grant_modal form input#client_id").val(),s=$("#access_grant_modal form input#client_secret").val(),i={url:e.api_endpoint+"oauth/token?"+o.serialize(),headers:{Authorization:"Basic "+btoa(r+":"+s)},dataType:"json",type:"POST"},$.ajax(i).success(function(e){return t(this.url,this.headers,e,!1)}).error(function(e,n,r){return e.responseJSON?t(this.url,this.headers,e.responseJSON,!0):t(this.url,this.headers,{error:n,error_description:r},!0)}),!0}}(this))},e.prototype.bindPaymentRequestModal=function(){var t,e;return e=function(t){return function(e,n){return e?n?t.renderPanel("danger",e.error,e.error_description):t.renderPanel("success","Access Token","Your Payment is <strong>"+e.status+"</strong> with Purchase ID <strong>"+e.purchase_id+"</strong>"):t.renderPanel("danger",e.error,e.error_description)}}(this),t=function(t){return function(n,r,s,o){var i;return i=e(s,o)+t.renderCode("Request URL",n)+t.renderCode("Request Headers",JSON.stringify(r,void 0,2))+t.renderCode("Response JSON",JSON.stringify(s,void 0,2)),$("#payment_request_output").html(i),$("#payment_request_modal .nav-tabs a[href=#payment_request_output]").tab("show")}}(this),$("#payment_request_modal #send_request_button").on("click",function(e){return function(n){var r,s,o,i;return o=$("#payment_request_modal form"),r=$("#payment_request_modal form input#client_id").val(),s=$("#payment_request_modal form input#client_secret").val(),i={url:e.api_endpoint+"api/v2/payment/authorize/capture?"+o.serialize(),headers:{Authorization:"Basic "+btoa(r+":"+s)},dataType:"json",type:"POST"},$.ajax(i).success(function(e){return t(this.url,this.headers,e,!1)}).error(function(e,n,r){return e.responseJSON?t(this.url,this.headers,e.responseJSON,!0):t(this.url,this.headers,{error:n,error_description:r},!0)}),!0}}(this))},e}(),$(function(){return s2p.docs=new s2p.Documentation(s2p)})}).call(this);